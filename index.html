<!DOCTYPE html>
<html>
	<head>
		<title>CameraTheremin</title>
		<script src="Tone.min.js"></script>
		<script src="controls.js"></script>
		<script src="script.js"></script>
		<script>
			var started = false;
			var playing = false;
			var synth = new Tone.SimpleSynth().toMaster();
			var oldfreq = -1;
			function start(){ 
				if(!started){
					synth.triggerAttack(oldfreq);	
					document.getElementById("strt").innerHTML = "Start theremin";
				} else{
					synth.triggerRelease();
					document.getElementById("strt").innerHTML = "Stop theremin ";
				}
				started = !started;
				dogaussblur = !dogaussblur;
				dothresh = !dothresh;
				docrop = !docrop;
				doColorChange = !doColorChange;	
			}
			function playSynth(freq){
				document.getElementById("freq").innerHTML = "Frequency: "+freq+" Hz";
				if(freq>0){
					synth.setNote(freq);
				}
				oldfreq = freq;
			}
		</script>
	</head>

	<body>
		<video id="vid" hidden></video>
		<canvas id="c"></canvas>
		<br>
		<button id="strt" onclick="start()">Start theremin</button>
		<button id="cbutton" onclick="setcont()">continuous</button>
		<button onclick="setcalibrate()">calibrate</button>
		<br>
		<div id="calibration">
			<button onclick="threshup(true)">thresh+</button>
			<button onclick="threshup(false)">thresh-</button>			
			<br>
				<button onclick="xsdelta(true)">xs+</button>
				<button onclick="xsdelta(false)">xs-</button>
				<button onclick="xedelta(true)">xe+</button>
				<button onclick="xedelta(false)">xe-</button>
				<button onclick="ysdelta(true)">ys+</button>
				<button onclick="ysdelta(false)">ys-</button>
				<button onclick="yedelta(true)">ye+</button>
				<button onclick="yedelta(false)">ye-</button>
			<br>
				<button onclick="nthreshdelta(true)">+</button>
				<button onclick="nthreshdelta(false)">-</button>
			<br>
				<button onclick="setbinsub()">binsub</button>
				<button onclick="stUp()">st+</button>
				<button onclick="stdn()">st-</button>
			<br>
				<button onclick="setmax()">set max</button>
				<button onclick="setmin()">set min</button>
				<button onclick="clearmaxmin()">clear</button>
			<br>
			<p id="subThresh" hidden>subtractor threshold = 10</p>
			<p id="maxval"></p>
			<p id="minval"></p>
			<p id="count"></p>
		</div>
		<p id="freq"></p>
